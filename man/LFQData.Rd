% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/LFQData.R
\name{LFQData}
\alias{LFQData}
\title{LFQData R6 class}
\description{
LFQData R6 class

LFQData R6 class
}
\examples{

istar <- sim_lfq_data_peptide_config()
LFQData$debug("omit_NA")
lfqdata <- LFQData$new(istar$data, istar$config)
lfqdata$filter_proteins_by_peptide_count()
tmp <- lfqdata$to_wide()
testthat::expect_equal(nrow(tmp$data) , nrow(tmp$rowdata))
testthat::expect_equal(ncol(tmp$data) , nrow(tmp$annotation) + ncol(tmp$rowdata))

stopifnot("data.frame" \%in\% class(tmp$data))
tmp <- lfqdata$to_wide(as.matrix = TRUE)
stopifnot("matrix" \%in\% class(tmp$data))
stopifnot(lfqdata$is_transformed()==FALSE)
lfqdata$summarize_hierarchy()

# filter for missing values

f1 <- lfqdata$omit_NA(nrNA = 0)
stopifnot(f1$hierarchy_counts() <= lfqdata$hierarchy_counts())

f2 <- lfqdata$omit_NA(factorDepth = 0)
stopifnot(f2$hierarchy_counts() <= lfqdata$hierarchy_counts())
f2n <-  lfqdata$omit_NA2(factorDepth = 1)
f2n$hierarchy_counts()

# A tibble: 1 Ã— 3
# isotopeLabel protein_Id peptide_Id
# <chr>             <int>      <int>
# 1 light                 3         11
lfqdata$response()
lfqdata$rename_response("peptide.intensity")
lfqdata$response()
stopifnot("LFQData" \%in\% class(lfqdata$get_copy()))
stopifnot("LFQDataTransformer" \%in\% class(lfqdata$get_Transformer()))
stopifnot("LFQDataStats" \%in\% class(lfqdata$get_Stats()))
stopifnot("LFQDataSummariser" \%in\% class(lfqdata$get_Summariser()))
stopifnot("LFQDataPlotter" \%in\% class(lfqdata$get_Plotter()))
stopifnot("LFQDataWriter" \%in\% class(lfqdata$get_Writer()))
stopifnot("LFQDataAggregator" \%in\% class(lfqdata$get_Aggregator()))

lfqdata2 <- lfqdata$get_copy()
lfqdata2$data <- lfqdata2$data[1:100,]
res <- lfqdata$filter_difference(lfqdata2)
stopifnot(nrow(res$data) == nrow(lfqdata$data) - 100)

tmp <- lfqdata$get_sample(5, seed = 4)
stopifnot(nrow(tmp$hierarchy()) == 5)

lw <- lfqdata$get_Writer()
stopifnot(names(lw$get_wide()) \%in\% c("data", "annotation"))

stopifnot("data.frame" \%in\% class(lw$get_long()))

}
\seealso{
Other LFQData: 
\code{\link{LFQDataAggregator}},
\code{\link{LFQDataPlotter}},
\code{\link{LFQDataStats}},
\code{\link{LFQDataSummariser}},
\code{\link{LFQDataToSummarizedExperiment}()},
\code{\link{LFQDataWriter}},
\code{\link{ProteinAnnotation}}
}
\concept{LFQData}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{config}}{AnalysisConfiguration}

\item{\code{data}}{data.frame or tibble matching AnalysisConfiguration.}

\item{\code{is_pep}}{todo}

\item{\code{prefix}}{e.g. "peptide_", "protein_", "compound_"}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-LFQData-new}{\code{LFQData$new()}}
\item \href{#method-LFQData-get_copy}{\code{LFQData$get_copy()}}
\item \href{#method-LFQData-get_sample}{\code{LFQData$get_sample()}}
\item \href{#method-LFQData-get_subset}{\code{LFQData$get_subset()}}
\item \href{#method-LFQData-subject_Id}{\code{LFQData$subject_Id()}}
\item \href{#method-LFQData-is_transformed}{\code{LFQData$is_transformed()}}
\item \href{#method-LFQData-remove_small_intensities}{\code{LFQData$remove_small_intensities()}}
\item \href{#method-LFQData-filter_proteins_by_peptide_count}{\code{LFQData$filter_proteins_by_peptide_count()}}
\item \href{#method-LFQData-omit_NA}{\code{LFQData$omit_NA()}}
\item \href{#method-LFQData-complete_cases}{\code{LFQData$complete_cases()}}
\item \href{#method-LFQData-to_wide}{\code{LFQData$to_wide()}}
\item \href{#method-LFQData-factors}{\code{LFQData$factors()}}
\item \href{#method-LFQData-hierarchy}{\code{LFQData$hierarchy()}}
\item \href{#method-LFQData-response}{\code{LFQData$response()}}
\item \href{#method-LFQData-rename_response}{\code{LFQData$rename_response()}}
\item \href{#method-LFQData-hierarchy_counts}{\code{LFQData$hierarchy_counts()}}
\item \href{#method-LFQData-summarize_hierarchy}{\code{LFQData$summarize_hierarchy()}}
\item \href{#method-LFQData-get_Plotter}{\code{LFQData$get_Plotter()}}
\item \href{#method-LFQData-get_Writer}{\code{LFQData$get_Writer()}}
\item \href{#method-LFQData-get_Summariser}{\code{LFQData$get_Summariser()}}
\item \href{#method-LFQData-get_Stats}{\code{LFQData$get_Stats()}}
\item \href{#method-LFQData-get_Transformer}{\code{LFQData$get_Transformer()}}
\item \href{#method-LFQData-get_Aggregator}{\code{LFQData$get_Aggregator()}}
\item \href{#method-LFQData-filter_difference}{\code{LFQData$filter_difference()}}
\item \href{#method-LFQData-clone}{\code{LFQData$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-new"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-new}{}}}
\subsection{Method \code{new()}}{
initialize
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$new(data, config, is_pep = TRUE, prefix = "ms_", setup = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{data}}{data.frame}

\item{\code{config}}{configuration}

\item{\code{is_pep}}{todo}

\item{\code{prefix}}{will be use as output prefix}

\item{\code{setup}}{is data setup needed, default = FALSE, if TRUE, calls \code{\link{setup_analysis}} on data first.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_copy"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_copy}{}}}
\subsection{Method \code{get_copy()}}{
get deep copy
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_copy()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_sample"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_sample}{}}}
\subsection{Method \code{get_sample()}}{
samples subset of data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_sample(size = 100, seed = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{size}}{size of subset default 100}

\item{\code{seed}}{set seed}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_subset"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_subset}{}}}
\subsection{Method \code{get_subset()}}{
get subset of data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_subset(x)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{x}}{data frame with columns containing subject_Id}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-subject_Id"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-subject_Id}{}}}
\subsection{Method \code{subject_Id()}}{
get subject ID columns
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$subject_Id()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-is_transformed"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-is_transformed}{}}}
\subsection{Method \code{is_transformed()}}{
is data trasfromed
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$is_transformed(is_transformed)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{is_transformed}}{logical}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
logical
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-remove_small_intensities"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-remove_small_intensities}{}}}
\subsection{Method \code{remove_small_intensities()}}{
some software is reporting NA's as 0, you must remove it from your data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$remove_small_intensities(threshold = 4)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{threshold}}{default 4.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
self
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-filter_proteins_by_peptide_count"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-filter_proteins_by_peptide_count}{}}}
\subsection{Method \code{filter_proteins_by_peptide_count()}}{
remove proteins with less than X peptides
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$filter_proteins_by_peptide_count()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
self
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-omit_NA"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-omit_NA}{}}}
\subsection{Method \code{omit_NA()}}{
Omit NA from intensities per hierarchy (e.g. protein or peptide), idea is to use it for normalization
For instance if a peptide has a missing value in more then nrNA of the samples within a condition
it will be removed
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$omit_NA(nrNA = 0, factorDepth = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{nrNA}}{number of NA values}

\item{\code{factorDepth}}{you control for nrNA per condition or experiment etc. e.g. factorDepth = 0  then per experiment}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
LFQData with NA omitted.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-complete_cases"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-complete_cases}{}}}
\subsection{Method \code{complete_cases()}}{
some software is reporting NA's as 0, you must remove it from your data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$complete_cases()}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{threshold}}{default 4.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
self
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-to_wide"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-to_wide}{}}}
\subsection{Method \code{to_wide()}}{
converts the data to wide
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$to_wide(as.matrix = FALSE, value = c("response", "nr_children"))}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{as.matrix}}{return as data.frame or matrix}

\item{\code{value}}{either response or nr chidren}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
list with data, annotation, and configuration
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-factors"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-factors}{}}}
\subsection{Method \code{factors()}}{
Annotation table
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$factors()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
data.frame
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-hierarchy"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-hierarchy}{}}}
\subsection{Method \code{hierarchy()}}{
Hierarchy table
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$hierarchy()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-response"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-response}{}}}
\subsection{Method \code{response()}}{
name of response variable
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$response()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
data.frame
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-rename_response"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-rename_response}{}}}
\subsection{Method \code{rename_response()}}{
new name of response variable
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$rename_response(newname = "Intensity")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{newname}}{default Intensity}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-hierarchy_counts"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-hierarchy_counts}{}}}
\subsection{Method \code{hierarchy_counts()}}{
number of elements at each level
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$hierarchy_counts()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-summarize_hierarchy"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-summarize_hierarchy}{}}}
\subsection{Method \code{summarize_hierarchy()}}{
e.g. number of peptides per protein etc
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$summarize_hierarchy()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
data.frame
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Plotter"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Plotter}{}}}
\subsection{Method \code{get_Plotter()}}{
get Plotter
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Plotter()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
LFQDataPlotter
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Writer"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Writer}{}}}
\subsection{Method \code{get_Writer()}}{
get Writer
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Writer(format = "xlsx")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{format}}{array of formats to write to supported are xlsx, csv and html}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
LFQDataPlotter
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Summariser"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Summariser}{}}}
\subsection{Method \code{get_Summariser()}}{
get Summariser
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Summariser()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
LFQDataSummarizer
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Stats"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Stats}{}}}
\subsection{Method \code{get_Stats()}}{
Get \code{\link{LFQDataStats}}. For more details see \code{\link{LFQDataStats}}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Stats(stats = c("everything", "interaction", "all"))}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{stats}}{default interaction, computes statistics within interaction.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
LFQDataStats
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Transformer"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Transformer}{}}}
\subsection{Method \code{get_Transformer()}}{
get Stats
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Transformer()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
LFQDataTransformer
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-get_Aggregator"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-get_Aggregator}{}}}
\subsection{Method \code{get_Aggregator()}}{
get Aggregator
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$get_Aggregator()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
LFQDataAggregator
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-filter_difference"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-filter_difference}{}}}
\subsection{Method \code{filter_difference()}}{
get difference of self with other if other is subset of self
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$filter_difference(other)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{other}}{a filtered LFQData set}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
Use to compare filtering results obtained from self, e.g. which proteins and peptides were removed (other)
}

\subsection{Returns}{
LFQData
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-LFQData-clone"></a>}}
\if{latex}{\out{\hypertarget{method-LFQData-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{LFQData$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
