% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tidyMS_aggregation.R
\name{aggregate_intensity_topN}
\alias{aggregate_intensity_topN}
\title{Aggregates top N intensities}
\usage{
aggregate_intensity_topN(pdata, config, .func, N = 3)
}
\arguments{
\item{pdata}{data.frame}

\item{config}{AnalysisConfiguration}

\item{N}{default 3 top intensities.}

\item{func}{function to use for aggregation}
}
\value{
list with data and new reduced configuration (config)
}
\description{
run \link{rank_peptide_by_intensity} first
}
\examples{

dd <- prolfqua_data('data_ionstar')$filtered()
config <- old2new(dd$config)
res <- dd$data
ranked <- rank_peptide_by_intensity(res,config)

mean_f <- function(x, name = FALSE){
 if(name){return("mean")};mean(x, na.rm=TRUE)
 }
sum_f <- function(x, name =FALSE){
 if(name){return("sum")};sum(x, na.rm = TRUE)
 }

resTOPN <- aggregate_intensity_topN(
 ranked,
 config,
 .func = mean_f,
  N=3)

print(dim(resTOPN$data))
# stopifnot(dim(resTOPN$data) == c(3260, 8))
stopifnot( names(resTOPN) \%in\% c("data", "config") )
config$table$get_response()
#debug(plot_estimate)
tmpRob <- plot_estimate(ranked,
 config,
 resTOPN$data,
 resTOPN$config,
 show.legend=TRUE)
stopifnot( "ggplot" \%in\% class(tmpRob$plots[[4]]) )

}
\seealso{
Other aggregation: 
\code{\link{INTERNAL_FUNCTIONS_BY_FAMILY}},
\code{\link{estimate_intensity}()},
\code{\link{intensity_summary_by_hkeys}()},
\code{\link{medpolish_estimate_dfconfig}()},
\code{\link{medpolish_estimate_df}()},
\code{\link{medpolish_estimate}()},
\code{\link{medpolish_protein_estimates}()},
\code{\link{plot_estimate}()},
\code{\link{plot_hierarchies_add_quantline}()},
\code{\link{plot_hierarchies_line_df}()},
\code{\link{plot_hierarchies_line}()},
\code{\link{rlm_estimate_dfconfig}()},
\code{\link{rlm_estimate}()}
}
\concept{aggregation}
\keyword{internal}
