---
title: "Summarize Peptide Level Measurements"
author: "WEW@FGCZ.ETHZ.CH"
date: "`r Sys.Date()`"
output:
  pdf_document: default
  html_document: default
params:
  configuration:  !r quote(SRMService::skylineconfig)
  data: !r quote(SRMService::sample_analysis)
vignette: >
  %\VignetteIndexEntry{Summarize Peptide Level Measurements}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---



```{r setup, include=FALSE}
library(tidyverse)
library(SRMService)

knitr::opts_chunk$set(echo = FALSE, message=FALSE)
data <- eval(params$data)
configuration <- eval(params$configuration)
```

## Summarize levels

```{r hierarchyCounts}

x <- hierarchyCounts( data , configuration )
knitr::kable(data.frame(NR = x), caption="summary")

```


```{r proteinSummaries}

x2 <- summarizeProteins(data, configuration)
x3 <- summarizeHierarchy(data, configuration)
tmp <- inner_join(x3, x2)
tmp <- tmp %>% select(-c(starts_with("min"), starts_with("max")))
knitr::kable(tmp, caption="Protein Summaries")

```


```{r missingFigIntensityHistorgram, fig.cap="histogram of mean condition intensities per transition"}
missignessHistogram(data, configuration)

```


```{r missingFigBarplot, fig.cap = "nr of missing"}
xx <- missingPerCondition(data, configuration)
xx$figure
```



```{r missingFigBarplotCumsum, fig.cap="cumulative sum of missing"}
xx <- missingPerConditionCumsum(data, configuration)
xx$figure
```
